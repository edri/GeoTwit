<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Leaflet Test-Application</title>
        <link rel="stylesheet" href="css/style.css" />
        <link rel="stylesheet" href="lib/leaflet/leaflet.css" />
        <script src="lib/leaflet/leaflet.js"></script>

        <script>
            window.onload = function() {
                console.log("Loaded.");

                swissMap = L.map('swissMap').setView([46.783, 8.152], 8);

                L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery &copy; <a href="http://mapbox.com">Mapbox</a>',
                    maxZoom: 20,
                    id: 'edri.pjdcfni6',
                    accessToken: 'pk.eyJ1IjoiZWRyaSIsImEiOiJjaW1tN2FhM3UwMDJheDdrbGI4MXJnbTZ0In0.upezaa8cZbUkDRoHRwInMA'
                }).addTo(swissMap);

                swissMap.on('click', function(e) {
                    document.getElementById('circleCoordinatesX').value = e.latlng.lat;
                    document.getElementById('circleCoordinatesY').value = e.latlng.lng;
                    L.marker([e.latlng.lat, e.latlng.lng]).addTo(swissMap);
                });
            }

            function addCircle() {
                L.circle([document.getElementById('circleCoordinatesX').value, document.getElementById('circleCoordinatesY').value], (document.getElementById('circleRadius').value * 1000), {
                    color: 'red',
                    fillColor: '#f03',
                    fillOpacity: 0.5
                }).addTo(swissMap);
            }

            function addRectangle() {
                var bounds = [[document.getElementById('squareSWCoordinatesX').value, document.getElementById('squareSWCoordinatesY').value],
                              [document.getElementById('squareNECoordinatesX').value, document.getElementById('squareNECoordinatesY').value]];

                L.rectangle(bounds, {color: "#ff7800", weight: 1}).addTo(swissMap);

                // Zoom the map to the rectangle bounds.x
                swissMap.fitBounds(bounds);
            }

            function addMarker() {
                L.marker([document.getElementById('markerCoordinatesX').value, document.getElementById('markerCoordinatesY').value]).addTo(swissMap);
            }
        </script>
    </head>
    <body>
        <h1>Welcome the the Leaflet test-application!</h1>

        Here is a map of the Switzerland:
        <div id="swissMap"></div>

        <p>
            <strong>Circle</strong> (please click on a location on the map to automaticaly fill the circle's fields)<br/>
            (<input id="circleCoordinatesX" placeholder="Latitude" type="text" />,
            <input id="circleCoordinatesY" placeholder="Longitude" type="text" />), radius of
            <input id="circleRadius" placeholder="Radius in km" type="number" /> km
            <input class="addBtn" onClick="addCircle()" type="button" value="Add a circle" />
        </p>

        <p>
            <strong>Rectangle</strong> (default: whole Switzerland)<br/>
            Southwest coordinates: (<input id="squareSWCoordinatesX" placeholder="Latitude" type="text" value="45.817851" />,
            <input id="squareSWCoordinatesY" placeholder="Longitude" type="text" value="5.956085" />)<br/>
            Nordeast coordinates: (<input id="squareNECoordinatesX" placeholder="Latitude" type="text" value="47.808454" />,
            <input id="squareNECoordinatesY" placeholder="Longitude" type="text" value="10.489254" />)<br/>
            <input onClick="addRectangle()" type="button" value="Add a rectangle" />
        </p>

        <p>
            <strong>Marker</strong> (default marker's location is the HEIG-VD in Yverdon-Les-Bains)<br/>
            (<input id="markerCoordinatesX" placeholder="Latitude" type="text" value="46.778678" />,
            <input id="markerCoordinatesY" placeholder="Longitude" type="text" value="6.658285" />)
            <input class="addBtn" onClick="addMarker()" type="button" value="Add a marker" />
        </p>
    </body>
</html>
